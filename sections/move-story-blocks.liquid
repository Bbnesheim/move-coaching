{{ 'section-move-story-blocks.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign bg_class = ''
  case section.settings.background_variant
    when 'default'
      assign bg_class = 'move-bg-default'
    when 'cream'
      assign bg_class = 'move-bg-cream'
    when 'surface'
      assign bg_class = 'move-bg-surface'
    when 'brown'
      assign bg_class = 'move-bg-brown'
    when 'pink'
      assign bg_class = 'move-bg-pink'
  endcase
-%}

<section
  id="MoveStoryBlocks-{{ section.id }}"
  class="section move-story-blocks {{ bg_class }} color-{{ section.settings.color_scheme }} gradient{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}"
>
  <div
    class="page-width move-section-padding"
    style="{% if section.settings.padding_top > 0 %}padding-top: {{ section.settings.padding_top }}px;{% endif %}{% if section.settings.padding_bottom > 0 %} padding-bottom: {{ section.settings.padding_bottom }}px;{% endif %}"
  >
    {%- if section.settings.heading != blank -%}
      <div class="move-story-blocks__header">
        <h2 class="h2">{{ section.settings.heading }}</h2>
      </div>
    {%- endif -%}

    <div class="move-story-blocks__grid move-story-blocks__grid--{{ section.settings.layout }}">
      {%- for block in section.blocks -%}
        {%- if block.type == 'story' -%}
          <article class="move-story-blocks__item" {{ block.shopify_attributes }}>
            {%- if block.settings.image != blank -%}
              <div class="move-story-blocks__media media media--portrait">
                {{ block.settings.image | image_url: width: 800 | image_tag: widths: '400, 600, 800', class: 'move-story-blocks__image' }}
              </div>
            {%- endif -%}
            {%- if block.settings.title != blank -%}
              <h3 class="h3 move-story-blocks__title">{{ block.settings.title }}</h3>
            {%- endif -%}
            {%- if block.settings.body != blank -%}
              <div class="move-story-blocks__body text-body">{{ block.settings.body }}</div>
            {%- endif -%}
            {%- if block.settings.emphasis_quote != blank -%}
              <p class="move-story-blocks__quote">{{ block.settings.emphasis_quote }}</p>
            {%- endif -%}
          </article>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "MOVE story blocks",
  "tag": "section",
  "class": "section move-story-blocks",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Min historie"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "stacked", "label": "Stacked" },
        { "value": "timeline", "label": "Timeline" }
      ],
      "default": "stacked"
    },
    {
      "type": "select",
      "id": "background_variant",
      "label": "Background",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "cream", "label": "Cream" },
        { "value": "surface", "label": "Surface" },
        { "value": "brown", "label": "Brown" },
        { "value": "pink", "label": "Pink" }
      ],
      "default": "cream"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Top padding override",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding override",
      "default": 0
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    }
  ],
  "blocks": [
    {
      "type": "story",
      "name": "Story block",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Utgangspunktet"
        },
        {
          "type": "textarea",
          "id": "body",
          "label": "Body"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "emphasis_quote",
          "label": "Emphasis quote"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "MOVE story blocks",
      "category": "MOVE",
      "blocks": [
        {
          "type": "story",
          "settings": {
            "title": "Utgangspunktet",
            "body": "Jeg har alltid vært aktiv, men likevel la jeg på meg rundt 15 kg på kort tid. Etter at jeg flyttet for meg selv mistet jeg balansen med mat, og plutselig passet ikke klærne lenger – jeg kjente at kroppen ikke var min.",
            "emphasis_quote": "Jeg følte meg «normal», men visste innerst inne at noe var galt."
          }
        },
        {
          "type": "story",
          "settings": {
            "title": "Vendepunktet",
            "body": "Jeg prøvde lavkarbo, jogging hver dag og masse trening. Vekten gikk ned, men kroppen ble ikke strammere – jeg følte meg «tynnfeit», uten muskler og uten selvtillit. Da bestemte jeg meg for strukturert trening og et kosthold jeg kunne leve med.",
            "emphasis_quote": "Jeg ville bli sterk, sprek og føle meg bra i min egen kropp."
          }
        },
        {
          "type": "story",
          "settings": {
            "title": "Resultatet",
            "body": "Etter noen uker var midjen minus 4,5 cm. Etter tre måneder hadde jeg mer energi, bedre humør og en sterkere kropp. Senere stilte jeg i bikinifitness – og etter to svangerskap tok jeg sølv i NM. Jeg vet hva som fungerer i en travel hverdag – når du har et mål, et system og støtte.",
            "emphasis_quote": "Dette var en livsstil."
          }
        }
      ]
    }
  ]
}
{% endschema %}
