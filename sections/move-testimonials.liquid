{{ 'section-move-testimonials.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign bg_class = ''
  case section.settings.background_variant
    when 'default'
      assign bg_class = 'move-bg-default'
    when 'cream'
      assign bg_class = 'move-bg-cream'
    when 'surface'
      assign bg_class = 'move-bg-surface'
    when 'brown'
      assign bg_class = 'move-bg-brown'
    when 'pink'
      assign bg_class = 'move-bg-pink'
  endcase
-%}

<section
  id="MoveTestimonials-{{ section.id }}"
  class="section move-testimonials move-testimonials--scroller {{ bg_class }} color-{{ section.settings.color_scheme }} gradient{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}"
>
  <div
    class="page-width move-section-padding"
    style="{% if section.settings.padding_top > 0 %}padding-top: {{ section.settings.padding_top }}px;{% endif %}{% if section.settings.padding_bottom > 0 %} padding-bottom: {{ section.settings.padding_bottom }}px;{% endif %}"
  >
    {%- if section.settings.heading != blank or section.settings.intro != blank -%}
      <div class="move-testimonials__header {{ section.settings.heading_alignment }}">
        {%- if section.settings.heading != blank -%}
          <h2 class="h2">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.intro != blank -%}
          <div class="move-testimonials__intro text-body">
            {{ section.settings.intro }}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="move-testimonials__grid">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'image' -%}
            <figure class="move-testimonials__item move-testimonials__item--image" {{ block.shopify_attributes }}>
              {%- if block.settings.image != blank -%}
                <div class="move-testimonials__image-wrapper media media--circle">
                  {{ block.settings.image | image_url: width: 200 | image_tag: widths: '120, 160, 200', class: 'move-testimonials__image' }}
                </div>
              {%- endif -%}
              {%- if block.settings.tag != blank or block.settings.caption != blank -%}
                <figcaption class="move-testimonials__meta">
                  {%- if block.settings.tag != blank -%}
                    <p class="move-testimonials__tag caption-with-letter-spacing">{{ block.settings.tag }}</p>
                  {%- endif -%}
                  {%- if block.settings.caption != blank -%}
                    <p class="move-testimonials__image-caption text-body">{{ block.settings.caption }}</p>
                  {%- endif -%}
                </figcaption>
              {%- endif -%}
            </figure>
          {%- when 'testimonial' -%}
            <article class="move-testimonials__item move-testimonials__item--quote" {{ block.shopify_attributes }}>
              {%- if block.settings.quote != blank -%}
                <blockquote class="move-testimonials__quote">{{ block.settings.quote }}</blockquote>
              {%- endif -%}
              <div class="move-testimonials__meta">
                {%- if block.settings.name != blank -%}
                  <p class="move-testimonials__name">{{ block.settings.name }}</p>
                {%- endif -%}
                {%- if block.settings.role_or_context != blank -%}
                  <p class="move-testimonials__role">{{ block.settings.role_or_context }}</p>
                {%- endif -%}
                {%- if block.settings.before_after_label != blank -%}
                  <p class="move-testimonials__tag caption-with-letter-spacing">{{ block.settings.before_after_label }}</p>
                {%- endif -%}
              </div>
            </article>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "MOVE testimonials",
  "tag": "section",
  "class": "section move-testimonials",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Dette sier kvinnene i MOVE Coaching"
    },
    {
      "type": "textarea",
      "id": "intro",
      "label": "Intro text",
      "default": "Les hvordan kvinner i MOVE Coaching beskriver hverdagen før og etter små, realistiske endringer."
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "background_variant",
      "label": "Background",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "cream", "label": "Cream" },
        { "value": "surface", "label": "Surface" },
        { "value": "brown", "label": "Brown" },
        { "value": "pink", "label": "Pink" }
      ],
      "default": "surface"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Top padding override",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding override",
      "default": 0
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "Jeg trodde jeg måtte være perfekt for å lykkes. Nå har jeg funnet en måte å leve på som faktisk fungerer i hverdagen."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "Kunde, 2-barnsmor"
        },
        {
          "type": "text",
          "id": "role_or_context",
          "label": "Role/context"
        },
        {
          "type": "text",
          "id": "before_after_label",
          "label": "Tag (e.g. Før/Etter)"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "tag",
          "label": "Tag (optional)"
        },
        {
          "type": "textarea",
          "id": "caption",
          "label": "Caption",
          "default": "Bildetekst"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "MOVE testimonials",
      "category": "MOVE",
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Den beste investeringen jeg har gjort for meg selv! Jeg er 35 år, student, brystkreftoverlever og småbarnsmor. Med MOVE har kosthold og trening blitt en naturlig del av hverdagen igjen – selv når livet er hektisk. Jeg har mer energi og overskudd, er endelig smertefri etter flere år med bekkensmerter, og har fått en enorm mestringsfølelse.",
            "name": "Kristin",
            "role_or_context": "35 år, student, brystkreftoverlever og småbarnsmor",
            "before_after_label": "6 måneder med MOVE"
          }
        },
        {
          "type": "image"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Coaching som virkelig gjør en forskjell. Jeg startet hos MOVE for å bli den beste versjonen av meg selv, og nå er jeg i full gang. Aline møter meg med konkrete tips, ærlige tilbakemeldinger og løsninger som faktisk passer min hverdag – også på de tunge dagene. Det gjør at jeg har lyst til å pushe meg selv videre.",
            "name": "Maren",
            "role_or_context": "Coachingkunde hos MOVE",
            "before_after_label": "Coaching som gjør en forskjell"
          }
        },
        {
          "type": "image"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Anbefaler MOVE Coaching med hele mitt hjerte. Jeg har slitt med sykdom i mange år, men med støtten fra teamet føler jeg at både kropp og hode har det bedre. De hjelper meg ikke bare med trening og mat, men også med mental støtte – det føles nesten som å få psykolog på kjøpet. Dette er virkelig den beste investeringen jeg har gjort.",
            "name": "Ellen",
            "role_or_context": "Coachingkunde hos MOVE",
            "before_after_label": "Beste investeringen jeg har gjort"
          }
        }
      ]
    }
  ]
}
{% endschema %}
