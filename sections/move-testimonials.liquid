{{ 'section-move-testimonials.css' | asset_url | stylesheet_tag }}
{{ 'section-move-testimonials.js' | asset_url | script_tag }}

{%- liquid
  assign bg_class = ''
  case section.settings.background_variant
    when 'default'
      assign bg_class = 'move-bg-default'
    when 'cream'
      assign bg_class = 'move-bg-cream'
    when 'surface'
      assign bg_class = 'move-bg-surface'
    when 'brown'
      assign bg_class = 'move-bg-brown'
    when 'pink'
      assign bg_class = 'move-bg-pink'
  endcase
-%}

<section
  id="MoveTestimonials-{{ section.id }}"
  class="section move-testimonials move-testimonials--scroller{% if section.settings.enable_card_shadow %} move-testimonials--shadow{% endif %} {{ bg_class }} color-{{ section.settings.color_scheme }} gradient{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}"
>
  <div
    class="page-width move-section-padding"
    style="{% if section.settings.padding_top > 0 %}padding-top: {{ section.settings.padding_top }}px;{% endif %}{% if section.settings.padding_bottom > 0 %} padding-bottom: {{ section.settings.padding_bottom }}px;{% endif %}"
  >
    <div class="move-testimonials__layout">
      <div class="move-testimonials__panel">
        <div class="move-testimonials__header {{ section.settings.heading_alignment }}">
            {%- if section.settings.heading_line_1 != blank -%}
              <h2
                class="h2 move-testimonials__heading-line"
                style="font-size: {{ section.settings.heading_line_1_size }}px; color: {{ section.settings.heading_line_1_color }};"
              >
                {{ section.settings.heading_line_1 }}
              </h2>
            {%- endif -%}
            {%- if section.settings.heading_line_2 != blank -%}
              <h2
                class="h2 move-testimonials__heading-line"
                style="font-size: {{ section.settings.heading_line_2_size }}px; color: {{ section.settings.heading_line_2_color }};"
              >
                {{ section.settings.heading_line_2 }}
              </h2>
            {%- endif -%}
            {%- if section.settings.heading_line_3 != blank -%}
              <h2
                class="h2 move-testimonials__heading-line"
                style="font-size: {{ section.settings.heading_line_3_size }}px; color: {{ section.settings.heading_line_3_color }};"
              >
                {{ section.settings.heading_line_3 }}
              </h2>
            {%- endif -%}
            {%- if section.settings.panel_cta_label != blank -%}
              <div class="move-testimonials__cta-wrapper">
                <a
                  class="button button--primary move-testimonials__panel-cta"
                  {% if section.settings.panel_cta_link == blank %}
                    role="link" aria-disabled="true"
                  {% else %}
                    href="{{ section.settings.panel_cta_link }}"
                  {% endif %}
                >
                  {{ section.settings.panel_cta_label }}
                </a>
              </div>
            {%- endif -%}
          </div>
      </div>

      <div class="move-testimonials__content">
        <button
          class="move-testimonials__arrow move-testimonials__arrow--prev move-testimonials__arrow--hidden"
          type="button"
          aria-label="Forrige erfaring"
        >
          &#8249;
        </button>
        <button
          class="move-testimonials__arrow move-testimonials__arrow--next"
          type="button"
          aria-label="Neste erfaring"
        >
          &#8250;
        </button>
        <div class="move-testimonials__grid">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
          {%- when 'image' -%}
            <figure class="move-testimonials__item move-testimonials__item--image" {{ block.shopify_attributes }}>
              <div class="move-testimonials__image-stack{% if block.settings.image != blank and block.settings.secondary_image != blank %} move-testimonials__image-stack--double{% endif %}">
                {%- if block.settings.image != blank -%}
                  <div class="move-testimonials__image-wrapper move-testimonials__image-wrapper--primary">
                    {{ block.settings.image | image_url: width: 480 | image_tag: widths: '320, 400, 480', class: 'move-testimonials__image' }}
                  </div>
                {%- endif -%}
                {%- if block.settings.secondary_image != blank -%}
                  <div class="move-testimonials__image-wrapper move-testimonials__image-wrapper--secondary">
                    {{ block.settings.secondary_image | image_url: width: 400 | image_tag: widths: '260, 320, 400', class: 'move-testimonials__image' }}
                  </div>
                {%- endif -%}
              </div>
              {%- if block.settings.tag != blank or block.settings.caption != blank -%}
                <figcaption class="move-testimonials__meta">
                  {%- if block.settings.tag != blank -%}
                    <p class="move-testimonials__tag caption-with-letter-spacing">{{ block.settings.tag }}</p>
                  {%- endif -%}
                  {%- if block.settings.caption != blank -%}
                    <p class="move-testimonials__image-caption text-body">{{ block.settings.caption }}</p>
                  {%- endif -%}
                </figcaption>
              {%- endif -%}
            </figure>
          {%- when 'testimonial' -%}
            <article class="move-testimonials__item move-testimonials__item--quote" {{ block.shopify_attributes }}>
              {%- if block.settings.quote != blank -%}
                <blockquote class="move-testimonials__quote">{{ block.settings.quote }}</blockquote>
              {%- endif -%}
              <div class="move-testimonials__meta">
                {%- if block.settings.name != blank -%}
                  <p class="move-testimonials__name">{{ block.settings.name }}</p>
                {%- endif -%}
                {%- if block.settings.role_or_context != blank -%}
                  <p class="move-testimonials__role">{{ block.settings.role_or_context }}</p>
                {%- endif -%}
                {%- if block.settings.before_after_label != blank -%}
                  <p class="move-testimonials__tag caption-with-letter-spacing">{{ block.settings.before_after_label }}</p>
                {%- endif -%}
              </div>
            </article>
        {%- endcase -%}
      {%- endfor -%}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "MOVE testimonials",
  "tag": "section",
  "class": "section move-testimonials",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Headings"
    },
    {
      "type": "text",
      "id": "heading_line_1",
      "label": "Line 1",
      "default": "Opplevelser og"
    },
    {
      "type": "range",
      "id": "heading_line_1_size",
      "label": "Line 1 font size",
      "min": 18,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "color",
      "id": "heading_line_1_color",
      "label": "Line 1 color",
      "default": "#5C4842"
    },
    {
      "type": "text",
      "id": "heading_line_2",
      "label": "Line 2",
      "default": "Tilbakemeldinger"
    },
    {
      "type": "range",
      "id": "heading_line_2_size",
      "label": "Line 2 font size",
      "min": 18,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "color",
      "id": "heading_line_2_color",
      "label": "Line 2 color",
      "default": "#5C4842"
    },
    {
      "type": "text",
      "id": "heading_line_3",
      "label": "Line 3",
      "default": "MOVE Coaching"
    },
    {
      "type": "range",
      "id": "heading_line_3_size",
      "label": "Line 3 font size",
      "min": 18,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "color",
      "id": "heading_line_3_color",
      "label": "Line 3 color",
      "default": "#FFFFFF"
    },
    {
      "type": "text",
      "id": "panel_cta_label",
      "label": "Panel CTA label",
      "default": "Les mer"
    },
    {
      "type": "url",
      "id": "panel_cta_link",
      "label": "Panel CTA link"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "background_variant",
      "label": "Background",
      "options": [
        { "value": "default", "label": "Default" },
        { "value": "cream", "label": "Cream" },
        { "value": "surface", "label": "Surface" },
        { "value": "brown", "label": "Brown" },
        { "value": "pink", "label": "Pink" }
      ],
      "default": "surface"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Top padding override",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding override",
      "default": 0
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "enable_card_shadow",
      "label": "Enable depth gradient shadow behind testimonial card",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "Jeg trodde jeg måtte være perfekt for å lykkes. Nå har jeg funnet en måte å leve på som faktisk fungerer i hverdagen."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "Kunde, 2-barnsmor"
        },
        {
          "type": "text",
          "id": "role_or_context",
          "label": "Role/context"
        },
        {
          "type": "text",
          "id": "before_after_label",
          "label": "Tag (e.g. Før/Etter)"
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Primary image"
        },
        {
          "type": "image_picker",
          "id": "secondary_image",
          "label": "Secondary image (optional)"
        },
        {
          "type": "text",
          "id": "tag",
          "label": "Tag (optional)"
        },
        {
          "type": "textarea",
          "id": "caption",
          "label": "Caption",
          "default": "Bildetekst"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "MOVE testimonials",
      "category": "MOVE",
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Den beste investeringen jeg har gjort for meg selv! Jeg er 35 år, student, brystkreftoverlever og småbarnsmor. Med MOVE har kosthold og trening blitt en naturlig del av hverdagen igjen – selv når livet er hektisk. Jeg har mer energi og overskudd, er endelig smertefri etter flere år med bekkensmerter, og har fått en enorm mestringsfølelse.",
            "name": "Kristin",
            "role_or_context": "35 år, student, brystkreftoverlever og småbarnsmor",
            "before_after_label": "6 måneder med MOVE"
          }
        },
        {
          "type": "image"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Coaching som virkelig gjør en forskjell. Jeg startet hos MOVE for å bli den beste versjonen av meg selv, og nå er jeg i full gang. Aline møter meg med konkrete tips, ærlige tilbakemeldinger og løsninger som faktisk passer min hverdag – også på de tunge dagene. Det gjør at jeg har lyst til å pushe meg selv videre.",
            "name": "Maren",
            "role_or_context": "Coachingkunde hos MOVE",
            "before_after_label": "Coaching som gjør en forskjell"
          }
        },
        {
          "type": "image"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Anbefaler MOVE Coaching med hele mitt hjerte. Jeg har slitt med sykdom i mange år, men med støtten fra teamet føler jeg at både kropp og hode har det bedre. De hjelper meg ikke bare med trening og mat, men også med mental støtte – det føles nesten som å få psykolog på kjøpet. Dette er virkelig den beste investeringen jeg har gjort.",
            "name": "Ellen",
            "role_or_context": "Coachingkunde hos MOVE",
            "before_after_label": "Beste investeringen jeg har gjort"
          }
        }
      ]
    }
  ]
}
{% endschema %}
